# Primary relationships between CPNG tables

# Location Info
# MSC ID is the key to identify a location and is used across all modules
TBL_MSC_INFO.MODULEID = master location ID

# DC Plant Relationships
TBL_DC_PLANT.DP_MSC = TBL_MSC_INFO.MODULEID
TBL_DC_PLANT.DP_MAN = TBL_MANU.M_NUM_ID
TBL_PUE_DC_DAILY.PDD_PDP_NUMBER = TBL_DC_PLANT.DP_NUM
TBL_PUE_DC_DAILY.PDD_MSC_NUMBER = TBL_DC_PLANT.DP_MSC

# AC Plant Relationships
TBL_AC_PLANT.AP_MSC = TBL_MSC_INFO.MODULEID
TBL_AC_PLANT.AP_MAN = TBL_METER_MANU.TBL_METER_MANU_ID
TBL_PUE_AC_DAILY.PAD_PAP_NUMBER = TBL_AC_PLANT.AP_NUM
TBL_PUE_AC_DAILY.PAD_MSC_NUMBER = TBL_AC_PLANT.AP_MSC

# UPS and PDU
TBL_AC_UPS.MSC_ID = TBL_MSC_INFO.MODULEID
TBL_AC_UPS.PDU_TYPE = TBL_AC_PDU_TYPE.ID

# RPP and RPP Type
TBL_AC_UPS_RPP.RPP_TYPE = TBL_AC_RPP_TYPE.ID
TBL_AC_UPS_RPP.RPP_SRC_PDU_ID = TBL_AC_UPS.ID

# RPP Readings
TBL_AC_RPP_DATA_COLLECT.AC_UPS_RPP_ID = TBL_AC_UPS_RPP.TBL_AC_UPS_RPP_ID

# Breakers
TBL_AC_BRKR_DATA_COLLECT.RPP_ID = TBL_AC_UPS_RPP.TBL_AC_UPS_RPP_ID
TBL_AC_UPS_RPP_BRKR_ASSIGN.RPP_ID = TBL_AC_UPS_RPP.TBL_AC_UPS_RPP_ID
TBL_AC_UPS_RPP_BRKR_ASSIGN.BRKR_NUM = TBL_AC_BRKR_DATA_COLLECT.BRKR_NUM

# BDFB (DC Bay) and BDFB Data
TBL_BDFB.MSCID = TBL_MSC_INFO.MODULEID
TBL_BDFB.BDFBIP = TBL_BDFB_DATA.BDFBIP
TBL_BDFB.BDFBNUM = TBL_BDFB_DATA.BDFBNUM
TBL_BDFB_DATA.MSCID = TBL_BDFB.MSCID

# DC Plant to BDFB
TBL_DC_PLANT.DP_PLANT_NUM = TBL_BDFB.BDPLNUM
TBL_DC_PLANT.DP_MSC = TBL_BDFB.MSCID

# Location Building Info
TBL_BLDG_INFO.NAME (use LIKE '%location_name%') to match general site info
