I have two tables: 

1. `CPMG Breaker Table` which contains the columns:
   - Panel
   - Floor PDU
   - Location
   - Starting Position No
   - Number of Positions
   - Rated Amp
   - Breaker State

2. `IFPE Breaker Table` which has similar columns, but correctly reflects the `Number of Positions` logic.

Issue:
In CPMG output, the `Number of Positions` is always set to 1, which is wrong. I need logic that works like IFPE:
- If `Number of Positions = 3` and `Starting Position = 1`, it means positions 1, 3, and 5 are taken.
- These positions must be marked as occupied for that `Panel` + `Floor PDU` combination.
- No overlapping or duplicate position usage should occur.
- Future breakers should not reuse any position already taken by the span of `Starting Position` and `Number of Positions`.

What I want:
✅ A query or logic that dynamically calculates the correct `Number of Positions` per breaker.
✅ Ensures no overlapping positions for the same Panel + Floor PDU.
✅ Follows the staggered logic as in IFPE.

Please rewrite the query to generate the correct `Number of Positions` and `Starting Position` values by referencing existing occupied positions for each unique Panel + Floor PDU + Location group.
