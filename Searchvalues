Here is a clear and complete prompt you can use to ask Copilot Agent to generate a MySQL query for the BDFB asset migration, specifically handling the logic for row_label and position_in_row:


---

✅ Prompt to Copilot Agent:

> I’m migrating BDFB assets from CPNG to DCTracker. I already provided you with table structures and column mappings in memory.

I need help generating a MySQL query that handles the logic for calculating the row_label and position_in_row based on the BDFB number field.

Please apply the following logic:

1. For standard BDFB names in the format like BDFB 101.01:

Extract 101 as the row_label

Extract 01 as the position_in_row



2. For non-standard names like:

BDP 00, BDFP00, Inverter 300A, or any names where a row number is not extractable:

Set row_label as 99

Set initial position_in_row as 00, but ensure that for the same row_label, the position_in_row is incremented (i.e., each record gets a unique value under that row_label)




3. For special cases like:

CSVS 11-6 (151.06) → Use the number in the brackets, i.e., extract 151 as the row_label, and 06 as the position_in_row.




Please generate a MySQL query that:

Extracts and assigns row_label and position_in_row accordingly

Ensures position_in_row is unique within a row label group (incremented as needed for 99)

Handles bracket values for custom asset names


You can use string parsing functions like SUBSTRING_INDEX, LOCATE, SUBSTRING, etc., to extract numeric values.

Input Reference (columns already in your memory):

BDFBNUM (e.g., BDFB 101.01, BDP00, CSVS 11-6 (151.06), etc.)

File: TBL_BDFB and related snapshots already uploaded


Output:

A MySQL query that returns the BDFBNUM, extracted row_label, and position_in_row as part of a SELECT result.





---

Let me know if you want Copilot to also include logic to store these values in a new staging table or use a stored procedure.
