Here’s a complete prompt you can give to Copilot to get the correct Rating (kVA) calculation from your TBL_PU_AC_DAILY table data, based on the 24 hourly readings per PDU:


---

✅ Prompt to Copilot Agent:

> I have a table called TBL_PU_AC_DAILY which logs hourly readings for each PDU. It contains 24 rows per PDU each day, one for each hour.

I want to calculate the Rating (kVA) for each PDU using the following logic:

Use the formula:

\text{kVA} = \frac{\text{PAD_WATTS}}{\text{PAD_PF} \times 1000}  (or equivalently: PAD_WATTS / PAD_PF / 1000)

PAD_WATTS is real power in Watts

PAD_PF is the power factor

If PAD_PF = 0, skip or use default value 0.95 to avoid divide-by-zero


✅ I want to calculate a single kVA value per PDU:

Either the maximum kVA value of the 24 readings, or

The average kVA across the 24 readings


If data is missing or invalid, default to '300' as the kVA.

Please write a query that:

1. Groups by PDU ID


2. Computes either the MAX or AVG kVA per day


3. Returns the PDU ID and the final Rating (kVA) column






---

📝 Optional Add-on:

> Also, include a fallback using COALESCE() so that if all values are null or PF = 0, it returns '300' as the default Rating (kVA).




---

This prompt will guide Copilot to build an accurate and production-ready query for your DC-Track mapping needs. Let me know if you want the result formatted as a CSV-ready output.
