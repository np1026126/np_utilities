Got it ğŸ‘ â€” this is actually a very clean analytics problem, and what you want is 100% doable in Grafana with the data you already have. Iâ€™ll break this step-by-step, mapping your business logic â†’ SQL â†’ Grafana panels, so you can reproduce it (and even feed it to Copilot/Gemini confidently).
1ï¸âƒ£ First: Clearly define your STATUS BUCKETS (this is key)
From what you explained (and from image #4), your raw PSC statuses map like this:
ğŸ”´ Cancelled
Cancelled
ğŸŸ¢ Completed (ONLY these two)
Complete - P/S/C Not Available, Alternate Site Req
Complete - No P/S/HVAC work needed
Note:
PSC Not Available â†’ Alternate Site Required = Power Needed
No PSC / HVAC work needed = No issue
ğŸŸ¡ In Progress (ALL others)
P/S Planner Input
PSC On Hold
Send back to Requestor
Waiting for Reviews
So logically:
Copy code
Text
TOTAL PSCs
 â”œâ”€â”€ Completed (2 statuses)
 â”œâ”€â”€ Cancelled (1 status)
 â””â”€â”€ In Progress (remaining 4 statuses)
This classification must happen in SQL, not in Grafana UI.
2ï¸âƒ£ Base SQL: Create a derived STATUS_BUCKET
You already have a good base query. Weâ€™ll wrap it and add a status_bucket.
âœ… Core query (foundation for all panels)
Copy code
Sql
SELECT
  pr.psc_job_id                             AS psc_id,
  pr.created_time,
  pr.close_time,
  ps.status_name                           AS raw_status,

  CASE
    WHEN ps.status_name = 'Cancelled'
      THEN 'Cancelled'

    WHEN ps.status_name IN (
      'Complete - P/S/C Not Available, Alternate Site Req',
      'Complete - No P/S/HVAC work needed'
    )
      THEN 'Completed'

    ELSE 'In Progress'
  END AS status_bucket

FROM psc_vetting_psc_requests pr
JOIN psc_status ps
  ON ps.status_id = pr.status_id
WHERE pr.system_name = 'FUZE';
ğŸ‘‰ Save this â€” every Grafana panel will reuse this logic.
3ï¸âƒ£ Panel 1: TOTAL Requests + Overall Breakdown (Completed / In Progress / Cancelled)
SQL (Count by bucket)
Copy code
Sql
SELECT
  status_bucket,
  COUNT(*) AS total
FROM (
  -- base query here
) t
GROUP BY status_bucket;
Grafana Panel
Panel Type: Pie chart or Bar chart
Legend: status_bucket
Value: total
Percentage: Enable â€œShow Percentâ€
This gives:
Total = 129
Completed = 72 (56%)
In Progress = 29 (22%)
Cancelled = 28 (22%)
âœ” Matches your slide exactly.
4ï¸âƒ£ Panel 2: Completed Turnaround Buckets (5 / 10 / 20 / >20 days)
Define turnaround bucket in SQL
Copy code
Sql
SELECT
  CASE
    WHEN DATE(pr.close_time) - DATE(pr.created_time) <= 5
      THEN 'Within 5 Days'
    WHEN DATE(pr.close_time) - DATE(pr.created_time) BETWEEN 6 AND 10
      THEN '5-10 Days'
    WHEN DATE(pr.close_time) - DATE(pr.created_time) BETWEEN 11 AND 20
      THEN '10-20 Days'
    ELSE '>20 Days'
  END AS turnaround_bucket,
  COUNT(*) AS total
FROM psc_vetting_psc_requests pr
JOIN psc_status ps ON ps.status_id = pr.status_id
WHERE ps.status_name IN (
  'Complete - P/S/C Not Available, Alternate Site Req',
  'Complete - No P/S/HVAC work needed'
)
GROUP BY turnaround_bucket;
Grafana Panel
Panel Type: Pie / Bar
Legend: turnaround_bucket
Unit: Percent
Calculation: Percent of total
âœ” This builds the Aging bar in your first diagram.
5ï¸âƒ£ Panel 3: In-Progress Status Breakdown (Planner Input, On Hold, etc.)
SQL
Copy code
Sql
SELECT
  ps.status_name,
  COUNT(*) AS total
FROM psc_vetting_psc_requests pr
JOIN psc_status ps ON ps.status_id = pr.status_id
WHERE ps.status_name NOT IN (
  'Cancelled',
  'Complete - P/S/C Not Available, Alternate Site Req',
  'Complete - No P/S/HVAC work needed'
)
GROUP BY ps.status_name;
Grafana Panel
Panel Type: Horizontal Bar
Sort: Descending
Show Percent: Yes
This matches:
Waiting for Planner Input â€“ 72%
Sent Back to Requestor â€“ 18%
On Hold â€“ 7%
Waiting for Review â€“ 3%
6ï¸âƒ£ Panel 4: Power / Space / HVAC (Optional Deep-Dive)
If Power/Space/HVAC are coming from PSC Equipment / Attribute tables, you can split:
Copy code
Sql
SELECT
  issue_type,
  COUNT(*) AS total
FROM psc_equipment_details
WHERE psc_job_id IN (
  SELECT psc_job_id
  FROM psc_vetting_psc_requests pr
  JOIN psc_status ps ON ps.status_id = pr.status_id
  WHERE ps.status_name = 'Complete - P/S/C Not Available, Alternate Site Req'
)
GROUP BY issue_type;
Then visualize as donut charts (like your slide).
7ï¸âƒ£ Time-Series Panel: Requests Trend (your last screenshot)
SQL
Copy code
Sql
SELECT
  DATE(pr.created_time) AS day,
  COUNT(*) AS total_requests
FROM psc_vetting_psc_requests pr
WHERE pr.system_name = 'FUZE'
GROUP BY DATE(pr.created_time)
ORDER BY day;
Grafana Panel
Panel Type: Time Series
X-Axis: Time
Y-Axis: Total Requests
âœ” This is exactly what you already have running.
8ï¸âƒ£ Dashboard Structure (Recommended)
Copy code

Row 1: KPIs
  - Total Requests
  - % Completed
  - % In Progress
  - % Cancelled

Row 2: Status Breakdown
  - Pie: Completed / In Progress / Cancelled
  - Bar: In-Progress Statuses

Row 3: Completed Aging
  - Bar / Pie: 5 / 10 / 20 / >20 days

Row 4: Trend
  - Time Series: Requests over time
9ï¸âƒ£ Why this works well in Grafana
âœ” Business logic handled in SQL
âœ” Grafana only visualizes
âœ” Easy to reuse queries
âœ” Easy to explain to leadership
âœ” Easy to hand over to Copilot / Gemini
10ï¸âƒ£ What you can paste into Copilot / Gemini
You can literally paste this prompt:
â€œCreate Grafana SQL queries and dashboard panels for PSC requests.
Status rules: Cancelled = Cancelled, Completed = 2 specific statuses, remaining = In Progress.
Create turnaround buckets based on created_date vs closed_date.
Output: total counts, percentages, aging, and in-progress breakdown.â€
It will give you almost identical SQL.
If you want, next we can:
Convert this into one reusable CTE
Build Grafana variables (Market, Region, Date)
Or help you replicate your exact PowerPoint slide 1:1 in Grafana
Just tell me ğŸ‘
